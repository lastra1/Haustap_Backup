# HausTap Backend API Deployment Guide

## Overview
This Node.js backend API uses MySQL for relational data and Firebase for real-time features and authentication.

## Environment Variables Required for Render

### MySQL Database (Provided by Render)
```bash
DB_HOST= # Render provides this
DB_PORT=3306 # Render provides this  
DB_NAME=haustap_production # Render provides this
DB_USER=haustap_user # Render provides this
DB_PASSWORD= # Render provides this
```

### Firebase Configuration (You must add these)
```bash
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_CREDENTIALS_PATH=./storage/app/firebase/service-account.json
FIREBASE_DATABASE_URL=https://your-project-id.firebaseio.com
```

### Application Settings
```bash
NODE_ENV=production
PORT=10000 # Render requires this port
JWT_SECRET= # Will be auto-generated by Render
JWT_EXPIRES_IN=24h
CORS_ORIGIN=*
CORS_CREDENTIALS=true
LOG_LEVEL=info
```

## Deployment Steps

1. **Add Firebase Service Account to Render:**
   - Go to Firebase Console → Project Settings → Service Accounts
   - Click "Generate New Private Key"
   - Download the JSON file
   - In Render Dashboard → Your Service → Environment → Add Environment Variable
   - Name: `FIREBASE_SERVICE_ACCOUNT_JSON`
   - Value: Paste the entire JSON content

2. **Create Firebase Config File:**
   - The deployment will automatically create the service account file from the environment variable

3. **Deploy:**
   - Push to GitHub → Render automatically deploys
   - Monitor logs for any errors

4. **Test:**
   - Health check: `https://your-service.onrender.com/api/health`
   - API root: `https://your-service.onrender.com/api/`

## Features
- ✅ MySQL database with connection pooling
- ✅ Firebase Admin SDK integration
- ✅ JWT authentication
- ✅ Rate limiting and security
- ✅ Comprehensive health checks
- ✅ CORS configured for production